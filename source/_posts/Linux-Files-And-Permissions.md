---
title: Linux指令之文件与权限
toc: true
date: 2021-11-07 16:47
tags:
  - Linux
categories: [Programming Language,Shell]
updated: 2021-11-07 16:47
references:
  - title: 阿里云
    url: https://developer.aliyun.com/
---

Linux 系统中常用的文件目录管理和文件权限管理命令。

<!-- more -->

## 文件目录管理命令

### Tree ：以树状图列出目录的内容

命令描述：tree 命令用于以树状图列出目录的内容。

tree 命令没有内置在系统中，使用 tree 命令需要执行以下命令来安装：

```bash
yum install -y tree
```

命令使用示例：

```bash
tree /usr/share/wallpapers/
```

### Ls ：显示指定工作目录下的内容

注意是 L 的小写，不是大写 I

命令描述： ls 命令用于显示指定工作目录下的内容。

命令格式：ls [参数] [目录名]

参数说明：

| 参数 | 说明                                 |
| -- | ---------------------------------- |
| -a | 显示所有文件及目录（包括隐藏文件）                  |
| -l | 将文件的权限、拥有者、文件大小等详细信息列出（ll 等同于 ls -l） |
| -r | 将文件反序列出（默认按英文字母正序）                 |
| -t | 将文件按创建时间正序列出                       |
| -R | 递归遍历目录下文件                          |

### Pwd ：获取当前工作目录的绝对路径

命令描述：获取当前工作目录的绝对路径。

命令使用：`pwd`

### Cd ：切换工作目录

命令描述：cd 命令用于切换工作目录。

在路径表示中：

- 一个半角句号（.）表示当前目录，例如路径./app/log 等同于 app/log。
- 两个半角句号（..）表示上级目录，例如路径/usr/local/../src 等同于/usr/src，其中 local 和 src 目录同级。

cd 命令的默认参数为 ~ ，符号 ~ 表示当前用户的家目录，即在 root 用户登录时，命令 cd、cd ~ 和 cd /root 执行效果相同。

### Touch ：修改文件或者目录的时间属性

命令描述：touch 命令用于修改文件或者目录的时间属性，包括存取时间和更改时间。若文件不存在，系统会建立一个新的文件。

命令格式：touch [参数] [文件]

参数说明：

| 参数 | 说明                |
| -- | ----------------- |
| -c | 如果指定文件不存在，不会建立新文件 |
| -r | 使用参考文件的时间记录       |
| -t | 设置文件的时间记录         |

### Mkdir ：新建子目录

命令描述：mkdir 命令用于新建子目录。-p 参数确保目录名称存在，不存在的就新建一个。

命令使用示例：

```bash
mkdir -p a/b/c
```

### Rm ：删除一个文件或者目录

命令描述：rm 命令用于删除一个文件或者目录。

命令格式：rm [参数] [文件]

参数说明：

| 参数 | 说明        |
| -- | --------- |
| -i | 删除前逐一询问确认 |
| -f | 无需确认，直接删除 |
| -r | 删除目录下所有文件 |

### Cp ：复制文件或目录

命令描述： cp 命令主要用于复制文件或目录。

命令格式：cp [参数] [源文件] [目标文件]

参数说明：

| 参数 | 说明                            |
| -- | ----------------------------- |
| -d | 复制时保留链接                       |
| -f | 覆盖已经存在的目标文件而不给出提示             |
| -i | 覆盖前询问                         |
| -p | 除复制文件的内容外，还把修改时间和访问权限也复制到新文件中 |
| -r | 复制目录及目录内的所有项目                 |

### Mv ：为文件或目录改名 / 将文件或目录移入其它位置

命令描述： mv 命令用来为文件或目录改名、或将文件或目录移入其它位置。

命令格式：mv [参数] [源文件] [目标文件]

参数说明：

参数	说明
-i	若指定目录已有同名文件，则先询问是否覆盖旧文件
-f	如果目标文件已经存在，不会询问而直接覆盖

### Rename ：批量改变文件名

命令描述：rename 命令用字符串替换的方式批量改变文件名。rename 命令有 C 语言和 Perl 语言两个版本，这里介绍 C 语言版本的 rename 命令，不支持正则表达式。

命令格式：rename [原值] [替换值]

## 文件权限管理

ls 命令可以查看 Linux 系统上的文件、目录和设备的权限。

```bash
ls -l /boot/
```

![ls](https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWcuYWxpY2RuLmNvbS90ZnMvVEIxMmdYY0hORDFnSzBqU1pGS1hYY0pyVlhhLTg2OS00MjAucG5n?x-oss-process=image/format,png#pic_center)

上述 ls -l 命令中显示的第一列就是文件权限信息，共 11 位字符，分 5 部分。

- 第 1 位表示存档类型，d 表示目录，- 表示一般文件。
- 第 2~4 位表示当前用户的权限（属主权限）。
- 第 5~7 位表示同用户组的用户权限（属组权限）。
- 第 8~10 位表示不同用户组的用户权限（其他用户权限）。
- 第 11 位是一个半角句号.，表示 SELinux 安全标签。

用户权限每组三位，rwx 分别表示读、写、执行权限，对应八进制表示为 4、2、1。

例如 efi 目录的 root 用户权限为 drwxr-xr-x.。

- 该目录对 root 用户具有读写和执行所有权限。
- 该目录对 root 组其他用户有读和执行权限。
- 该目录对其他用户有读和执行权限。

所以该权限表示对应八进制权限表示为：

- 属主权限：4+2+1=7。
- 属组权限：4+1=5。
- 其他用户权限：4+1=5。

即 755。

### Chmod ：修改文件权限

chmod 命令用于修改文件权限 mode，-R 参数以递归方式对子目录和文件进行修改。

将 hello.sh 文件增加属主的执行权限。

```bash
chmod u+x hello.sh
```

将 hello.sh 文件撤销属主的执行权限。

```bash
chmod u-x hello.sh
```

将 hello.sh 文件权限修改为八进制表示的 744 权限。

```bash
chmod 744 hello.sh
```

**u+x 表示增加属主的执行权限，u 表示属主，g 表示属组，o 表示其他，a 表示所有用户。**

### Chown ：修改文件的属主和属组

chown 命令修改文件的属主和属组

- -R 参数以递归方式对子目录和文件进行修改
- ls -l 命令显示的第三列和第四列就是文件的属主和属组信息。

修改 test.txt 文件的属主用户为 test。

```bash
chown test test.txt
```

修改 test.txt 文件的属主和属组为 admin。

```bash
chown admin:admin test.txt
```

### Chgrp ：修改文件的属组

chgrp 命令用于修改文件的属组。

命令使用示例：

将 test.txt 文件的属组改为 root。

```bash
chgrp root test.txt
```
